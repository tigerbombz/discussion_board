<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Discussion Board</title>
  <script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.3.5/angular.min.js'/></script>
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.5/angular-route.min.js"></script>
  <script>

    var myApp = angular.module('myApp', ['ngRoute']);

    //CONFIG
    myApp.config(function ($routeProvider){
      $routeProvider
      .when('/', {
        templateUrl: 'static/partials/login.html'
      })
      .when('/partial2',{
        templateUrl: 'static/partials/dashboard.html'
      })
      .otherwise({
        redirectTo: '/'
      });

    });//END OF CONFIG


    //LOGIN FACTORY
    myApp.factory('loginFactory', function($http){
      var logins = [];
      var factory = {};

      factory.index = function(callback){
        $http.get('/logins').success(function(output){
          logins = output;
          callback(logins);
        })
      }

      factory.create = function(info, callback){
        $http.post('/logins', info).success(function (output){
          logins.push(output);
        })
      }

      return factory
    })//END OF LOGIN FACTORY




    //LOGIN CONTROLLER
    myApp.controller('loginsController', function($scope, loginFactory, $location){
      loginFactory.index(function (data){
        $scope.logins = data;
      })

      $scope.create = function() {
        loginFactory.create($scope.newLogin, function(){
          $scope.logins = data
        })
        $scope.newLogin = {};
        $location.path('/partial2')
      }


    })//END OF LOGIN CONTROLLER


  </script>
</head>
<body>
  <div ng-app='myApp'>
    <a href="#/">Login</a> | <a href="#/partial2">Dashboard</a>
    <div ng-view=''></div>
  </div>
</body>
</html>
